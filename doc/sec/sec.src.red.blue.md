

从零开始学红队01：红队快速入门 | 什么 ATT&CK框架、Kill Chain网络杀伤链、PTES？
https://www.bilibili.com/read/cv8048662/

作者：二向箔安全学院
链接：https://www.zhihu.com/question/327262645/answer/701244262

### 红队测试的意义
1. 评估客户对威胁行为的反应能力。
2. 通过实现预演（访问CEO电子邮件、访问客户数据等）来评估客户网络的安全态势。
3. 演示攻击者访问客户端资产的潜在路径。
 
我们认为站在红队的角度来说，任何网络安全保障任务都会通过安全检测的技术手段从寻找问题的角度出发，发现系统安全漏洞，寻找系统、网络存在的短板缺陷。
红队安全检测方会通过使用多种检测与扫描工具，对蓝方目标网络展开信息收集、漏洞测试、漏洞验证。
尤其是在面向规模型企业时，更会通过大规模目标侦查等快速手段发现系统存在的安全问题，其主要流程如下：大规模目标侦查红方为了快速了解蓝方用户系统的类型、设备类型、版本、开放服务类型、端口信息，确定系统和网络边界范围，将会通过Nmap、端口扫描与服务识别工具，甚至是使用ZMap、MASScan等大规模快速侦查工具了解用户网络规模、整体服务开放情况等基础信息，以便展开更有针对性的测试。口令与常用漏洞测试红方掌握蓝方用户网络规模、主机系统类型、服务开放情况后，将会使用Metasploit或手工等方式展开针对性的攻击与漏洞测试，其中包含：各种Web应用系统漏洞，中间件漏洞，系统、应用、组件远程代码执行漏等，同时也会使用Hydra等工具对各种服务、中间件、系统的口令进行常用弱口令测试，最终通过技术手段获得主机系统或组件权限。权限获取与横向移动红方通过系统漏洞或弱口令等方式获取到特定目标权限后，利用该主机系统权限、网络可达条件进行横向移动，扩大战果控制关键数据库、业务系统、网络设备，利用收集到的足够信息，最终控制核心系统、获取核心数据等，以证明目前系统安全保障的缺失。红队充当真实且有动力的攻击者。大多数时候，红队攻击范围很大，整个环境都在范围内，他们的目标是渗透，维持持久性、中心性、可撤退性，以确认一个顽固的敌人能做什么。所有策略都可用，包括社会工程。最终红队会到达他们拥有整个网络的目的，否则他们的行动将被捕获，他们将被所攻击网络的安全管理员阻止，届时，他们将向管理层报告他们的调查结果，以协助提高网络的安全性。红队的主要目标之一是即使他们进入组织内部也要保持隐身。渗透测试人员在网络上表现不好，并且可以很容易的被检测到，因为他们采用传统的方式进入组织，而红队队员是隐秘的、快速的，并且在技术上具备了规避AV、端点保护解决方案、防火墙和组织已实施的其他安全措施的知识。
### 蓝队
蓝队面临的更大挑战，是在不对用户造成太多限制的情况下，发现可被利用的漏洞，保护自己的领域。1. 弄清控制措施对蓝队而言最重要的，是了解自身环境中现有控制措施的能力，尤其是在网络钓鱼和电话钓鱼方面。有些公司还真就直到正式对抗了才开始找自家网络中的防护措施。2. 确保能收集并分析数据因为蓝队的功效基于收集和利用数据的能力，日志管理工具，比如Splunk，就特别重要了。另一块能力则是知道如何收集团队动作的所有数据，并高保真地记录下来，以便在复盘时确定哪些做对了，哪些做错了，以及如何改进。3. 使用适合于环境的工具蓝队所用工具取决于自身环境所需。他们得弄清“这个程序在干什么？为什么它会试图格式化硬盘？”，然后加上封锁非预期动作的技术。测试该技术是否成功的工具，则来自红队。4. 挑有经验的人加入团队除了工具，蓝队最有价值的东西，是队员的知识。随着经验的增长，你会开始想“我见过这个，那个也见过，他们做了这个，还做了那个，但我想知道这里是否有个漏洞。”如果你只针对已知的东西做准备，那你对未知就毫无准备。5. 假定会有失败提问，是通往探索未知的宝贵工具。别止步于为今天已存在的东西做准备，要假定自己的基础设施中将会有失败。最好的思路，就是假设终将会有漏洞，没什么东西是100%安全的。